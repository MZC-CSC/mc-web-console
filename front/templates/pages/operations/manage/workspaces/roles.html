<div class="page-body">
  <div class="page">
    <div class="page-wrapper">
      <div class="page-body">
        <div class="container-xl">
          <!-- List -->
          <div class="row row-cards">
            <!-- table area-->
            <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">List of Roles</h3>
                  <div class="card-actions btn-actions">
                    <a
                      class="btn btn-outline-danger"
                      data-bs-toggle="modal"
                      data-bs-target="#commonDefaultModal"
                      onclick="webconsolejs['partials/layout/modal'].commonModal(this,'RoleDelete', 'Would you like to delete this role ?', 'pages/operation/workspace/roles.deleteRole')"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="icon"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke="currentColor"
                        fill="none"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          stroke="none"
                          d="M0 0h24v24H0z"
                          fill="none"
                        ></path>
                        <path
                          d="M4 7l16 0"
                        ></path>
                        <path
                          d="M10 11l0 6"
                        ></path>
                        <path
                          d="M14 11l0 6"
                        ></path>
                        <path
                          d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"
                        ></path>
                        <path
                          d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"
                        ></path>
                      </svg>
                      Delete
                    </a>

                    <a
                      href="#create_role"
                      class="btn btn-primary"
                      data-bs-toggle="collapse"
                      data-bs-target="#create-mode-cards"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="icon"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke="currentColor"
                        fill="none"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          stroke="none"
                          d="M0 0h24v24H0z"
                          fill="none"
                        ></path>
                        <path d="M12 5l0 14"></path>
                        <path d="M5 12l14 0"></path>
                      </svg>
                      Add
                    </a>
                  </div>
                </div>

                <div
                  class="card-table table-responsive"
                  style="max-height: 400px; overflow: hidden"
                >
                  <div id="roles-table" class="roles-table-container"></div>
                </div>
              </div>
            </div>
            <!-- table area end -->
          </div>

          <!-- == V I E W == 모드 카드들 -->
          <div id="view-mode-cards" class="collapse bg-secondary-lt">
            <!-- 배경 적용 카드 -->
            
              <!-- Role Detail 카드 -->
              <div class="card" id="role-detail-card">
                <div class="card-header">
                  <h3 class="card-title">
                    Role Detail<span id="role-detail-rolename" class="ms-2 text-primary" style="display: none; font-weight: normal;">
                      [<span id="role-detail-rolename-text"></span>]
                    </span>
                  </h3>
                  <div class="card-actions btn-actions">
                    <a
                      href="#edit_role"
                      class="btn btn-outline-warning"
                      data-bs-toggle="collapse"
                      data-bs-target="#edit-mode-cards"
                      style="display: none;"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="icon"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke="currentColor"
                        fill="none"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          stroke="none"
                          d="M0 0h24v24H0z"
                          fill="none"
                        ></path>
                        <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"></path>
                        <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"></path>
                        <path d="M16 5l3 3"></path>
                      </svg>
                      Edit
                    </a>
                  </div>
                </div>
                <div class="card-body">
                  <!-- Role 기본 정보 -->
                  <div class="row p-4 mb-4" style="background-color: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">
                    <div class="datagrid">
                      <div class="datagrid-item">
                        <div class="datagrid-title">Name</div>
                        <div class="datagrid-content" id="role-detail-name-view"></div>
                      </div>
                      <div class="datagrid-item">
                        <div class="datagrid-title">Description</div>
                        <div class="datagrid-content" id="role-detail-desc-view"></div>
                      </div>

                    </div>
                  </div>
                  
                  <!-- 섹션 구분선 -->
                  <div class="border-bottom mb-4"></div>
                  
                  <!-- Platform 카드 -->
                  <div class="card mb-3" id="platform-menu" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="platform-header" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">
                        Platform access
                        <span id="platform-menu-status" class="ms-2" style="display: none;">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="color: #206bc4;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M5 12l5 5l10 -10"></path>
                          </svg>
                          <small class="text-muted">Menu access available</small>
                        </span>
                      </h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="platform-toggle-btn" style="display: none;">
                          <i class="ti ti-chevron-down" id="platform-arrow"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="platform-menu-body">
                      <div
                        id="platform-menu-tree"
                        style="
                          background-color: #f8f9fa;
                          border: 1px solid #e9ecef;
                          border-radius: 4px;
                          padding: 10px;
                          max-height: 300px;
                          overflow-y: auto;
                        "
                      ></div>
                    </div>
                  </div>

                  <!-- Workspace 카드 -->
                  <div class="card mb-3" id="workspace-menu" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="workspace-header" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">
                        Workspace access
                        <span id="workspace-menu-status" class="ms-2" style="display: none;">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="color: #206bc4;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M5 12l5 5l10 -10"></path>
                          </svg>
                          <small class="text-muted">Workspace access available</small>
                        </span>
                      </h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="workspace-toggle-btn" style="display: none;">
                          <i class="ti ti-chevron-down" id="workspace-arrow"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="workspace-menu-body">
                      <div class="row align-items-center">
                        <div class="col-auto me-3">
                          <label class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="workspace-toggle-view" disabled>
                            <span class="form-check-label"></span>
                          </label>
                          <div id="workspace-status-view" class="text-center mt-1" style="display: none;">
                            <small class="text-success">(Enabled)</small>
                          </div>
                        </div>
                        <div class="col">
                          <div class="form-label text-primary">Workspace Access</div>
                          <div class="text-muted">Enable workspace functionality for this role</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- CSP Role Mapping 카드 -->
                  <div class="card mb-3" id="csp-role-mapping" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="csp-header" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">
                        CSP Role
                        <span id="csp-menu-status" class="ms-2" style="display: none;">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="color: #206bc4;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M5 12l5 5l10 -10"></path>
                          </svg>
                          <small class="text-muted">CSP Role access available</small>
                        </span>
                      </h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="csp-toggle-btn" style="display: none;">
                          <i class="ti ti-chevron-down" id="csp-arrow"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="csp-role-mapping-body">
                      <!-- CSP Role Mapping 테이블 -->
                      <div id="csp-role-mapping-table"></div>
                      
                      <!-- 빈 상태 메시지 -->
                      <div id="csp-role-mapping-empty" class="text-center py-4" style="display: none;">
                        <div class="text-muted">
                          <div class="text-muted">No CSP roles mapped for this role</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            
          </div>

          <!-- == C R E A T E == 모드 카드들 -->
          <div id="create-mode-cards" class="collapse bg-secondary-lt">
            
              <!-- Create New Role 카드 -->
              <div class="card" id="create_role">
                <div class="card-header">
                  <h3 class="card-title">Create New Role</h3>
                </div>
                <div class="card-body">
                  <!-- Role 기본 정보 -->
                  <div class="row p-4 mb-4" style="background-color: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">
                    <form>
                      <div class="mb-3">
                        <label class="form-label required">Role Name</label>
                        <input
                          type="text"
                          class="form-control"
                          id="role-name-input"
                          name="role-name"
                          placeholder="Input role name"
                          required
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea
                          class="form-control"
                          id="role-description-input"
                          name="role-description"
                          placeholder="Input role description"
                          rows="3"
                        ></textarea>
                      </div>
                    </form>
                  </div>
                  
                  <!-- 섹션 구분선 -->
                  <div class="border-bottom mb-4"></div>
                  
                  <!-- Platform 카드 -->
                  <div class="card mb-3" id="platform-menu-create" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="platform-header-create" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">Platform access</h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="platform-toggle-btn-create">
                          <i class="ti ti-chevron-down" id="platform-arrow-create"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="platform-menu-create-body">
                      <div
                        id="platform-menu-create-tree"
                        style="
                          background-color: #f8f9fa;
                          border: 1px solid #e9ecef;
                          border-radius: 4px;
                          padding: 10px;
                          max-height: 300px;
                          overflow-y: auto;
                        "
                      ></div>
                    </div>
                  </div>

                  <!-- Workspace 카드 -->
                  <div class="card mb-3" id="workspace-menu-create" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="workspace-header-create" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">Workspace access</h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="workspace-toggle-btn-create">
                          <i class="ti ti-chevron-down" id="workspace-arrow-create"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="workspace-menu-create-body">
                      <div class="row align-items-center">
                        <div class="col-auto me-3">
                          <label class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="workspace-toggle-create-inner">
                            <span class="form-check-label"></span>
                          </label>
                        </div>
                        <div class="col">
                          <div class="form-label text-primary">Workspace Access</div>
                          <div class="text-muted">Toggle to enable workspace access for this role</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- CSP Role Mapping 카드 -->
                  <div class="card mb-3" id="csp-role-mapping-create" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="csp-header-create" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">CSP Role</h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="csp-toggle-btn-create">
                          <i class="ti ti-chevron-down" id="csp-arrow-create"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="csp-role-mapping-create-body">
                      <form id="csp-role-mapping-form">
                        <div class="row">
                          <div class="col-md-4">
                            <div class="mb-3">
                              <label class="form-label required">CSP Provider</label>
                              <select class="form-select" id="csp-provider-select" name="csp-provider" required>
                                <option value="">Select CSP Provider</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="mb-3">
                              <label class="form-label required">CSP Role Name</label>
                              <input type="text" class="form-control" id="csp-role-name-input" name="csp-role-name" placeholder="e.g., MCIAM_MyRole" required>
                            </div>
                          </div>
                          <div class="col-md-2">
                            <div class="mb-3">
                              <label class="form-label">&nbsp;</label>
                              <button type="button" class="btn btn-primary w-100" id="add-csp-role-btn">
                                Add
                              </button>
                            </div>
                          </div>
                        </div>
                      </form>
                      
                      <!-- CSP Role Mapping 테이블 -->
                      <div class="mt-3">
                        <div id="create-csp-role-mapping-table"></div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Save/Cancel 버튼 -->
                  <div class="d-flex justify-content-end mt-3">
                    <button class="btn me-2" id="cancel-create-role-btn">
                      Cancel
                    </button>
                    <button class="btn btn-primary" id="save-create-role-btn">
                      Save Role
                    </button>
                  </div>
                </div>
              </div>
            
          </div>

          <!-- == E D I T == 모드 카드들 -->
          <div id="edit-mode-cards" class="collapse bg-secondary-lt">
            
              <!-- Edit Role 카드 -->
              <div class="card" id="edit_role">
                <div class="card-header">
                  <h3 class="card-title">
                    Edit Role
                    <span id="edit-role-name-display" class="ms-2 text-primary" style="display: none; font-weight: normal;">
                      [<span id="edit-role-name-text"></span>]
                    </span>
                  </h3>
                </div>
                <div class="card-body">
                  <!-- Role 기본 정보 -->
                  <div class="row p-4 mb-4" style="background-color: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">
                    <form>
                      <div class="mb-3">
                        <label class="form-label required">Role Name</label>
                        <input
                          type="text"
                          class="form-control"
                          id="edit-role-name-input"
                          name="edit-role-name"
                          placeholder="Input role name"
                          required
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea
                          class="form-control"
                          id="edit-role-description-input"
                          name="edit-role-description"
                          placeholder="Input role description"
                          rows="3"
                        ></textarea>
                      </div>
                    </form>
                  </div>
                  
                  <!-- 섹션 구분선 -->
                  <div class="border-bottom mb-4"></div>
                  
                  <!-- Platform 카드 -->
                  <div class="card mb-3" id="platform-menu-edit" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="platform-header-edit" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">Platform access</h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="platform-toggle-btn-edit">
                          <i class="ti ti-chevron-down" id="platform-arrow-edit"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="platform-menu-edit-body">
                      <div
                        id="platform-menu-edit-tree"
                        style="
                          background-color: #f8f9fa;
                          border: 1px solid #e9ecef;
                          border-radius: 4px;
                          padding: 10px;
                          max-height: 300px;
                          overflow-y: auto;
                        "
                      ></div>
                    </div>
                  </div>

                  <!-- Workspace 카드 -->
                  <div class="card mb-3" id="workspace-menu-edit" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="workspace-header-edit" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">Workspace access</h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="workspace-toggle-btn-edit">
                          <i class="ti ti-chevron-down" id="workspace-arrow-edit"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="workspace-menu-edit-body">
                      <div class="row align-items-center">
                        <div class="col-auto me-3">
                          <label class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="workspace-toggle-edit-inner">
                            <span class="form-check-label"></span>
                          </label>
                        </div>
                        <div class="col">
                          <div class="form-label text-primary">Workspace Access</div>
                          <div class="text-muted">Toggle to enable workspace access for this role</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- CSP Role Mapping 카드 -->
                  <div class="card mb-3" id="csp-role-mapping-edit" style="box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" id="csp-header-edit" style="background-color: #f8f9fa; cursor: pointer;">
                      <h3 class="card-title">CSP Role</h3>
                      <div class="card-actions btn-actions">
                        <button class="btn btn-link p-0" id="csp-toggle-btn-edit">
                          <i class="ti ti-chevron-down" id="csp-arrow-edit"></i>
                        </button>
                      </div>
                    </div>
                    <div class="card-body collapse" id="csp-role-mapping-edit-body">
                      <form id="csp-role-mapping-edit-form">
                        <div class="row">
                          <div class="col-md-4">
                            <div class="mb-3">
                              <label class="form-label required">CSP Provider</label>
                              <select class="form-select" id="edit-csp-provider-select" name="edit-csp-provider" required>
                                <option value="">Select CSP Provider</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="mb-3">
                              <label class="form-label required">CSP Role Name</label>
                              <input type="text" class="form-control" id="edit-csp-role-name-input" name="edit-csp-role-name" placeholder="e.g., MCIAM_MyRole" required>
                            </div>
                          </div>
                          <div class="col-md-2">
                            <div class="mb-3">
                              <label class="form-label">&nbsp;</label>
                              <button type="button" class="btn btn-primary w-100" id="add-csp-mapping-btn">
                                Add
                              </button>
                            </div>
                          </div>
                        </div>
                      </form>
                      
                      <!-- CSP Role Mapping 테이블 -->
                      <div class="mt-3">
                        <div id="csp-role-mapping-edit-table"></div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Save/Cancel 버튼 -->
                  <div class="d-flex justify-content-end mt-3">
                    <button class="btn me-2" id="cancel-edit-role-btn">
                      Cancel
                    </button>
                    <button class="btn btn-primary" id="save-edit-role-btn">
                      Save Changes
                    </button>
                  </div>
                </div>
              </div>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- pageloader -->
<%= partial("partials/layout/pageloader.html") %>

<!-- javascript -->
<%= javascriptTag("common/api/services/roles_api.js") %> <%=
javascriptTag("pages/operation/workspace/roles.js") %>
